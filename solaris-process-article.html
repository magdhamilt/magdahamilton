<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stabilizing a Dual-Sun System - Magda Hamilton</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <div class="nav-content">
            <a href="ocean-solaris.html" class="back-link">← BACK TO PROJECT</a>
            <a href="index.html" class="back-link">HOME</a>
        </div>
          <div class="contact-icons">
            <a href="mailto:hi@magdahamilton.dev" aria-label="Email">
                <svg viewBox="0 0 24 24">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
            </a>
            <a href="https://linkedin.com/in/magdahamilton" target="_blank" aria-label="LinkedIn">
                <svg viewBox="0 0 24 24">
                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                </svg>
            </a>
            <a href="https://github.com/magdhamilt" target="_blank" aria-label="GitHub">
                <svg viewBox="0 0 24 24">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
            </a>
            <a href="https://instagram.com/mhamilton.py" target="_blank" aria-label="Instagram">
                <svg viewBox="0 0 24 24">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
            </a>
        </div>
    </nav>

    <article>
        <div class="article-meta">
            <h1>Stabilizing a Dual-Sun System: Solving the Three-Body Problem in Three.js</h1>
            <p class="subtitle">How I implemented gravitational physics in Three.js to build a simulation of a sentient ocean inspired by Stanisław Lem's Solaris.</p>
            <p class="notice">Originally published on Medium, November 2024</p>
        </div>

        <p>
            In Stanisław Lem's Solaris, the ocean-covered planet circles two suns — a massive red giant and a smaller, faster blue dwarf. By all rights, this system should be gravitationally chaotic, the planet's orbit eventually degrading into collision or ejection. But Lem imagined something extraordinary: the ocean itself actively stabilizes the system, constantly adjusting the planet's mass distribution to counteract the competing gravitational pulls.
        </p>

        <p>
            When I set out to create a simulation of Solaris in Three.js, this gravitational dance became more than narrative flavor — it was a technical challenge I needed to solve. How do you visualize an alien intelligence performing real-time orbital engineering? To understand what I was simulating, I first needed to understand why the problem was so hard in the first place.
        </p>

        <a href="https://magdhamilt.github.io/ocean-solaris/" target="_blank" class="demo-link">
            → Experience the live simulation (Zoom out to see both suns. Watch the shimmer. Look at the Ocean's surface.)
        </a>

        <h2>The Three-Body Problem: From Newton to Poincaré to Chaos</h2>

        <p>
            In 1687, Isaac Newton formulated his law of universal gravitation. Equipped with this discovery, humans were able to predict the exact position of two celestial bodies orbiting each other. The Universe seemed complete. Then Newton tried to add a third body. The math disintegrated. With three gravitating objects there was no general solution. Newton himself was frustrated by this limitation, particularly when trying to understand the Moon's orbit perturbed by the Sun's influence, writing in 1684 that <a href="https://www.newtonproject.ox.ac.uk/catalogue/record/NATP00089" target="_blank">"to define these motions by exact laws admitting of easy calculation exceeds, if I am not mistaken, the force of any human mind."</a>
        </p>

        <p>
            For the next two centuries, the three-body problem consumed the world's greatest mathematical minds. Leonhard Euler found specific configurations where three bodies could maintain stable orbits — special cases, not the general solution everyone sought. Joseph-Louis Lagrange discovered five points where a small object could orbit stably in a two-body system, the gravitational sweet spots we now use for space telescopes. Mathematicians developed perturbation theory, treating the third body as a small disturbance and calculating approximate orbits that worked beautifully for practical astronomy. They were making progress, finding workarounds, getting close enough for navigation and prediction.
        </p>

        <p>
            No one had found the general solution, but surely it existed somewhere, waiting to be discovered.
        </p>

        <p>
            Then in the 1880s, Henri Poincaré shattered that hope.
        </p>

        <p>
            Working on the three-body problem for a mathematical competition, Poincaré discovered something disturbing: infinitesimally small changes in starting positions produced wildly different outcomes. The trajectories didn't follow predictable patterns — they tangled into what he called "homoclinic tangles," so complex they could never be captured by simple equations.
        </p>

        <p>
            The three-body problem had no general solution not because mathematicians weren't clever enough, but because the system itself was fundamentally unpredictable. Poincaré had discovered what we now call chaos: deterministic systems that are nonetheless impossible to predict. The clockwork universe was dead.
        </p>

        <h2>Lem's Solution: A Living Stabiliser</h2>

        <p>
            Lem understood the three-body problem. In Solaris, scientists observe that <a href="https://www.ebsco.com/research-starters/literature-and-writing/solaris-stanislaw-lem" target="_blank">"the planet's orbit was in no way subject to the expected variations: it was stable, as stable as the orbit of a planet in our own solar system."</a> This shouldn't be possible. The living Ocean <a href="https://www.ebsco.com/research-starters/literature-and-writing/solaris-stanislaw-lem" target="_blank">"seems to have a unique function: it supports an optimal orbit of the planet around the Sun."</a>
        </p>

        <p>
            The Ocean doesn't solve the equations — it rewrites them continuously. By shifting its vast colloidal mass, creating asymmetries and density variations across its planetary surface, it generates the precise gravitational perturbations needed to maintain stability. Where Poincaré found chaos in fixed trajectories, Lem imagined an entity performing real-time orbital engineering.
        </p>

        <p>
            This is active stabilization on a cosmic scale. The Ocean treats the three-body problem not as a mathematical puzzle requiring an elegant solution, but as a control problem demanding constant intervention. It's the difference between finding the perfect static balance and never stopping the corrections — like a tightrope walker shifting their weight pole moment by moment.
        </p>

        <p>
            The scientists catalog the Ocean's <a href="https://www.ebsco.com/research-starters/literature-and-writing/solaris-stanislaw-lem" target="_blank">"giant, meaningless in appearance, constructions,"</a> never quite grasping that these elaborate structures might be the Ocean's gravitational calculations made visible. The alien intelligence doesn't communicate. It simply refuses to fall.
        </p>

        <p>
            For my Three.js simulation, this gave me both a conceptual framework and a visual challenge: show the Ocean actively working against gravitational chaos, with surface patterns that reveal its engineering in action.
        </p>

        <h2>Translating Theory to WebGL</h2>

        <p>
            In my Three.js simulation, I needed to visualize something that Lem left mysterious: how does the Ocean stabilize its orbit? The answer lay in treating the problem not as mathematics, but as real-time control theory.
        </p>

        <h2>The Dual-Sun System</h2>

        <p>
            I created two suns with fundamentally unstable orbits. The red giant moves slowly (0.08 rad/s) along a 250-unit radius orbit, while the blue dwarf races faster (0.12 rad/s) at 220 units. Their gravitational interference creates chaotic perturbations — exactly the kind of orbital decay Poincaré proved was inevitable.
        </p>

        <p>
            I implemented this by calculating the gravitational chaos directly:
        </p>

        <pre><code>const sunInterference = Math.sin(redSunAngle - blueSunAngle) *
    Math.cos(time * 0.3);
const resonanceEffect = Math.sin(time * 0.17) *
    Math.cos(time * 0.23);</code></pre>

        <p>
            These competing frequencies would normally cause 8% orbital deviations — catastrophic for any planet. But then the Ocean intervenes.
        </p>

        <h2>The Ocean's Active Stabilization</h2>

        <p>
            Rather than letting chaos run wild, I implemented what the Ocean does: continuous, real-time correction. The Ocean "senses" the gravitational chaos and counteracts 95% of it, leaving only 5% visible as surface shimmer — proof of work being done.
        </p>

        <pre><code>const oceanCorrectionFactor = 0.95;
const stabilizedChaosX = chaosX * (1.0 - oceanCorrectionFactor);</code></pre>

        <p>
            This isn't a cheat — it's the point. The Ocean is actively computing gravitational corrections and implementing them through mass redistribution.
        </p>

        <h2>Visualizing the Engineering</h2>

        <p>
            The real challenge was making this invisible work visible. In the fragment shader, I created "engineering zones" that appear where the Ocean is working hardest. When both suns align, you see pulsing patterns on the Ocean's surface — FBM-based noise that simulates the Ocean's calculations made manifest:
        </p>

        <pre><code>float redEngineering = calculateEngineeringZone(uRedSunPos, uRedSunColor, 0);
float blueEngineering = calculateEngineeringZone(uBlueSunPos, uBlueSunColor, 1);</code></pre>

        <p>
            These patterns intensify when gravitational chaos peaks. The Ocean doesn't just stabilize — it shows you it's working, through glowing neural-like activity across its surface. Wave interference patterns, pulsing zones aligned with each sun, organic flow textures — all suggesting an alien intelligence performing planetary-scale engineering in real time.
        </p>

        <h2>The Feedback Loop</h2>

        <p>
            The engineering zones don't exist in isolation — they're part of a continuous feedback loop where physics drives visuals, creating a system that feels alive.
        </p>

        <p>
            When gravitational chaos peaks (both suns aligned or opposed), the totalChaos value spikes. This triggers two visual responses simultaneously:
        </p>

        <p>
            First, the suns themselves react. Their glow intensity pulses in response to the gravitational stress they're experiencing:
        </p>

        <pre><code>const chaosPulse = 1.0 + (totalChaos * 0.15);
sun.glowMesh.material.opacity = 0.25 * pulse * chaosPulse;
sun.light.intensity = baseLightIntensity * chaosPulse;</code></pre>

        <p>
            When chaos is high, the suns shine brighter — not because they're physically brighter, but because they're under more gravitational strain. It's visual stress made literal.
        </p>

        <p>
            Second, the Ocean's engineering zones intensify. The same totalChaos value that brightens the suns also drives the shader's engineering calculations. Higher chaos means more pulsing, more wave interference, more visible work across the Ocean's surface.
        </p>

        <p>
            The result is a system that breathes: during moments of alignment, you see the suns shimmer and glow while the Ocean's surface erupts with coordinated pulsing patterns. During stable moments, everything calms — the suns dim slightly, the engineering zones fade to a subtle shimmer.
        </p>

        <h2>Results</h2>

        <p>
            In practice, the system creates natural rhythms that emerge from the orbital mechanics. When both suns align (roughly every 30 seconds in my timing), chaos peaks — the suns shimmer visibly, their coronas pulse brighter, and the Ocean's surface lights up with intense engineering activity. When the suns are perpendicular, the system relaxes: the shimmer fades, the engineering zones dim to a gentle glow, and everything breathes easier.
        </p>

        <p>
            The most striking visual effect happens where engineering zones overlap. When both suns are above the horizon, you see distinct red and blue pulsing patterns on opposite sides of the Ocean. But where their zones meet, they blend into purple — the Ocean simultaneously stabilizing against both gravitational pulls, its work visible in the interference pattern.
        </p>

        <p>
            Viewers typically notice the shimmer first: Why are the suns wobbling slightly? Then they spot the pulsing patterns on the Ocean surface. The connection between the two is never explicitly stated, but it's intuitive: something down there is responding to something up there. That implicit understanding — that sense of invisible work made partially visible — creates exactly the kind of alien mystery Lem was describing.
        </p>

        <h2>Conclusion</h2>

        <p>
            The result is a simulation that captures what makes Lem's Ocean so unsettling: it doesn't communicate through language or symbols. It communicates through work — through the constant, tireless effort of keeping its world stable. Every glowing pattern on the surface, every pulsing engineering zone, every shimmer of residual chaos is the Ocean saying something we can observe but never fully understand: I am here. I am thinking. I refuse to fall.
        </p>

        <p>
            Newton couldn't solve the three-body problem. Poincaré proved it was unsolvable. But Lem imagined something that didn't need to solve it — something that simply never stops correcting. In building this simulation, I found myself less interested in the equations and more fascinated by what it means to visualize alien thought made manifest in physics.
        </p>

    </article>
     <footer>
        <p>© 2025 Magda Hamilton</p>
    </footer>
</body>
</html>